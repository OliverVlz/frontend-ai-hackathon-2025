<mat-card class="form-card">
  <mat-card-header>
    <mat-card-title>Crear Nueva Zona de Cultivo</mat-card-title>
    <mat-card-subtitle>Complete la información para registrar una nueva zona</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="zonaCultivoForm" (ngSubmit)="onSubmit()">
      <!-- Información básica de la zona -->
      <h3>Información de la Zona</h3>
      
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nombre de la Zona</mat-label>
        <input matInput formControlName="nombre" placeholder="Ej: Campo Norte">
        <mat-error *ngIf="hasError('nombre', 'required')">El nombre es obligatorio</mat-error>
        <mat-error *ngIf="hasError('nombre', 'maxlength')">El nombre no puede exceder 200 caracteres</mat-error>
      </mat-form-field>

      <!-- En una implementación real, esto vendría de un mapa interactivo -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Coordenadas</mat-label>
        <textarea matInput formControlName="coordenadas" placeholder="Coordenadas en formato JSON" rows="3"></textarea>
        <mat-hint>En una implementación completa, estas coordenadas vendrían de un mapa interactivo</mat-hint>
        <mat-error *ngIf="hasError('coordenadas', 'required')">Las coordenadas son obligatorias</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Área (m²)</mat-label>
        <input matInput type="number" formControlName="area" placeholder="Ej: 10000">
        <mat-error *ngIf="hasError('area', 'required')">El área es obligatoria</mat-error>
        <mat-error *ngIf="hasError('area', 'min')">El área debe ser mayor a 0.1 m²</mat-error>
      </mat-form-field>

      <!-- Información del cultivo -->
      <h3>Información del Cultivo</h3>
      
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Tipo de Cultivo</mat-label>
        <mat-select formControlName="tipo_cultivo">
          <mat-option *ngFor="let tipo of tiposCultivo" [value]="tipo.id">
            {{ tipo.nombre }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="hasError('tipo_cultivo', 'required')">El tipo de cultivo es obligatorio</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Etapa de Crecimiento</mat-label>
        <mat-select formControlName="etapa_crecimiento">
          <mat-option *ngFor="let etapa of etapasCrecimiento" [value]="etapa.value">
            {{ etapa.viewValue }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="hasError('etapa_crecimiento', 'required')">La etapa de crecimiento es obligatoria</mat-error>
      </mat-form-field>

      <!-- Información del sistema de riego -->
      <h3>Sistema de Riego</h3>
      
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Tipo de Riego</mat-label>
        <mat-select formControlName="tipo_riego">
          <mat-option *ngFor="let tipo of tiposRiego" [value]="tipo.id">
            {{ tipo.nombre_display || tipo.nombre }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="hasError('tipo_riego', 'required')">El tipo de riego es obligatorio</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Tasa de Flujo (galones/hora)</mat-label>
        <input matInput type="number" formControlName="tasa_flujo" placeholder="Ej: 500">
        <mat-hint>Cantidad de agua que su sistema puede suministrar por hora</mat-hint>
        <mat-error *ngIf="hasError('tasa_flujo', 'required')">La tasa de flujo es obligatoria</mat-error>
        <mat-error *ngIf="hasError('tasa_flujo', 'min')">La tasa de flujo debe ser mayor a 0.1 gal/h</mat-error>
      </mat-form-field>

      <!-- Botones de acción -->
      <div class="form-actions">
        <button type="button" mat-stroked-button color="warn" [disabled]="isSubmitting">
          Cancelar
        </button>
        <button type="submit" mat-raised-button color="primary" [disabled]="isSubmitting">
          {{ isSubmitting ? 'Guardando...' : 'Guardar Zona' }}
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
